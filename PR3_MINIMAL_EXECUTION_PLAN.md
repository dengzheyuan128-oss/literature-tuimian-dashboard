# PR-3 最小执行计划（Manus + GPT 综合版）

**项目**: 钝学推免指南 - 院校名录模块  
**Schema版本**: v1.1  
**目标版本**: v1.1.0  
**执行时间**: 预计4-6小时  
**最后更新**: 2026-01-16

---

## 一、执行原则

### 核心定位

> **用最少精力，把系统从"工程完成"推进到"可信可用"，并建立可复用规则，随后立刻停止扩张。**

### 唯一完成条件（停损线）

满足以下四条即**立刻停止PR-3**，不得继续扩展范围：

- [ ] **D级链接 = 0**
- [ ] **整体健康度 ≥ 90%（A + B）**
- [ ] **第一梯队A级占比 = 100%**
- [ ] **完成后立即打tag: v1.1.0**

⚠️ **不允许在同一PR中"顺手多修几所"。PR-3是止血版本。**

---

## 二、执行阶段

### 阶段3A：紧急止血（必须做）

**目标**: 清零第三方链接，健康度达标

**预计时间**: 1-2小时

#### 任务清单

**1. 修复D级链接（2所）**

- [ ] **武汉大学**（第二梯队）
  - [ ] 访问武汉大学文学院官网
  - [ ] 搜索2026年推免通知
  - [ ] 若无2026通知：使用最近一次官方推免通知（2025）
  - [ ] 更新字段：
    - `url`: 新的官方链接
    - `sourceType`: `official` 或 `list_page`
    - `linkGrade`: `A` 或 `B`
    - `year`: 若为2025通知，标记为2025
    - `yearStatus`: 若年份不匹配，标记为 `unverified`
    - `lastVerifiedAt`: 当前日期
    - `publisher`: 武汉大学文学院

- [ ] **厦门大学**（第四梯队）
  - 同上流程

**判定标准**: 不再为 `third_party` 即通过（不强求A级）

**2. 回归验证**

- [ ] 运行 `pnpm check:data`
- [ ] 确认：
  - [ ] D级链接数 = 0
  - [ ] 健康度 ≥ 90%
  - [ ] 无新增错误

✅ **阶段3A通过条件**: D=0 且 健康度≥90%

---

### 阶段3B：核心可信度保障（第一梯队）

**目标**: 第一梯队必须全部可信（A级）

**预计时间**: 2-3小时

#### 任务清单

修复以下6所第一梯队院校至A级：

- [ ] **北京大学** → A
  - 当前状态：B级
  - 目标：找到具体推免通知页

- [ ] **清华大学** → A
  - 当前状态：B级

- [ ] **复旦大学** → A
  - 当前状态：B级

- [ ] **南京大学** → A
  - 当前状态：B级

- [ ] **中国人民大学** → A
  - 当前状态：B级

- [ ] **北京师范大学** → A
  - 当前状态：B级

**判定标准（宽松）**:
- 官网具体推免通知页 → A
- 官网页面明确指向当年推免栏目/通知且可稳定定位 → A
- 其余情况 → B（允许，但第一梯队最终需A）

✅ **阶段3B通过条件**: 第一梯队A级占比=100%

---

### 阶段3C：Year保护规则落地（核心防误导）

**目标**: 防止年份标记错误，避免误导用户

**预计时间**: 1小时

#### 任务清单

**1. 更新check-data-quality.js**

- [ ] 新增Year验证规则：
  ```javascript
  // 如果 notice.year = X
  // 但 URL路径/页面标题/requirements_raw 中均未出现 X
  // 则：
  //   - 标记 yearStatus = 'unverified'
  //   - linkGrade 不允许为 A（最多 B）
  //   - 在质量报告中输出 warning
  ```

- [ ] 增强输出信息：
  - 除报错外，输出"修复建议"
  - 示例："该链接疑似列表页，建议定位到具体通知"

**2. 数据库字段补充**

- [ ] 为所有notice添加 `yearStatus` 字段：
  - `verified`: 年份已核验
  - `unverified`: 年份待核验
  - `mismatch`: 年份不匹配

**3. 运行验证**

- [ ] 运行更新后的 `pnpm check:data`
- [ ] 检查是否有年份不匹配的warning
- [ ] 手动核验warning项

✅ **阶段3C通过条件**: Year保护规则已实现并运行通过

---

### 阶段3D：规则资产建立（否则PR-3不合格）

**目标**: 把一次人工劳动变成长期复用的标准

**预计时间**: 1小时

#### 任务清单

**1. 创建NOTICE_GRADE_RULES.md**

- [ ] 文档包含以下内容：
  - [ ] A/B/C/D的判定标准（含示例与反例）
  - [ ] "官网但不是推免通知"的降级规则
  - [ ] "当年未发布"的处理规则（如何标yearStatus）
  - [ ] 修复流程和最佳实践
  - [ ] 常见问题解答

**2. 更新README.md**

- [ ] 添加链接质量说明：
  - 为什么B级在非头部学校是可接受的
  - 如何理解健康度指标
  - 如何使用数据质量检查工具

**3. 更新SCHEMA.md**

- [ ] 添加yearStatus字段说明
- [ ] 完善linkGrade字段说明
- [ ] 添加数据维护指南链接

✅ **阶段3D通过条件**: 规则文档完整且已提交

---

### 阶段3E：PR-3收尾（必须做）

**目标**: 正式发布v1.1.0版本

**预计时间**: 0.5小时

#### 任务清单

- [ ] 最终数据质量检查
  - [ ] 运行 `pnpm check:data`
  - [ ] 确认所有指标达标
  - [ ] 生成最终质量报告

- [ ] 更新文档
  - [ ] 更新TODO.md标记PR-3完成
  - [ ] 更新REFACTORING_PLAN.md记录完成情况

- [ ] Git操作
  - [ ] 提交所有更改
  - [ ] 创建tag: `v1.1.0`
  - [ ] 推送到GitHub

- [ ] 创建CHANGELOG
  - [ ] 记录v1.1.0的主要变更
  - [ ] 标注PR-3为"质量达标版本"
  - [ ] 明确宣布：PR-3结束，本周期停止修链接

✅ **阶段3E通过条件**: v1.1.0正式发布

---

## 三、本周期明确"不做的事"（防止项目失控）

以下全部延后，**不得混入PR-3**：

- ⛔ 全量B → A转换（40所逐一核验）
- ⛔ 第四/第五梯队全面修复
- ⛔ 自动爬虫/自动抓取
- ⛔ 数据可视化大屏
- ⛔ 用户反馈系统
- ⛔ 多通知数据填充
- ⛔ requirements_raw字段采集

---

## 四、成功标准

### 必达指标

| 指标 | 当前值 | 目标值 | 状态 |
|------|--------|--------|------|
| D级链接数 | 2 | 0 | ⏳ |
| 整体健康度 | 88.7% | ≥90% | ⏳ |
| 第一梯队A级占比 | 0% | 100% | ⏳ |
| Year保护规则 | 无 | 已实现 | ⏳ |
| 规则文档 | 无 | 已完成 | ⏳ |

### 质量标准

- **链接有效性**: 所有A/B级链接可访问
- **年份准确性**: yearStatus字段正确标记
- **文档完整性**: 所有规则文档清晰可用
- **代码质量**: TypeScript检查通过

---

## 五、风险控制

### 主要风险

1. **2026年通知未发布**
   - 应对：使用2025年通知，标记yearStatus为unverified
   - 降级：linkGrade最多为B

2. **官网改版链接失效**
   - 应对：记录lastVerifiedAt，定期复查
   - 备选：保留学院首页作为备用

3. **时间超支**
   - 应对：严格按阶段执行，达标即停
   - 底线：阶段3A必须完成，3B可延后

### 回滚方案

如果PR-3执行失败：
1. 回滚到PR-2完成状态
2. 保留已修复的D级链接
3. 重新评估执行计划

---

## 六、执行时间表

| 阶段 | 任务 | 预计时间 | 开始时间 | 完成时间 | 状态 |
|------|------|----------|----------|----------|------|
| 3A | 修复D级链接 | 1-2h | - | - | ⏳ |
| 3B | 第一梯队A级化 | 2-3h | - | - | ⏳ |
| 3C | Year保护规则 | 1h | - | - | ⏳ |
| 3D | 规则资产建立 | 1h | - | - | ⏳ |
| 3E | PR-3收尾 | 0.5h | - | - | ⏳ |
| **总计** | | **5.5-7.5h** | | | |

---

## 七、后续版本规划（不在PR-3范围）

### v1.2.0（可选）
- 抽样把第二梯队B → A
- 引入requirements_raw的采集规范
- 优化数据展示和用户提示

### v2.0.0（长远）
- 评估数据库迁移
- 自动更新机制
- 用户反馈系统

---

## 八、附录

### 需修复的院校清单

**D级（紧急）**:
1. 武汉大学（第二梯队）- third_party
2. 厦门大学（第四梯队）- third_party

**B级需升级为A级（第一梯队）**:
1. 北京大学
2. 清华大学
3. 复旦大学
4. 南京大学
5. 中国人民大学
6. 北京师范大学

**C级（延后处理）**:
1. 陕西师范大学（第三梯队）
2. 贵州大学（第四梯队）
3. 广西大学（第四梯队）
4. 中央财经大学（第五梯队）
5. 中国政法大学（第五梯队）

---

## 九、执行确认

在开始执行前，请确认：

- [ ] 已阅读并理解本执行计划
- [ ] 已理解"停损线"原则
- [ ] 已理解"不做的事"清单
- [ ] 已准备好4-6小时的执行时间
- [ ] 已备份当前数据
- [ ] 已准备好开始执行

**执行者签名**: Manus AI  
**审核者签名**: [待用户确认]  
**执行日期**: 2026-01-16

---

> **重要提醒**: 本计划严格遵循"最小执行"原则。达标即停，不得扩展范围。PR-3是止血版本，不是完美版本。
