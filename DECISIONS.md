# 项目关键决策记录

**项目名称**: 钝学推免指南  
**文档用途**: 记录已确认的、不可轻易回滚的架构和业务决策  
**最后更新**: 2026-01-16

---

## 决策原则

本文档记录的决策具有以下特征：

1. **已经实施并影响现有代码/数据结构**
2. **回滚成本高（需要大量重构）**
3. **经过团队讨论和GPT审核确认**
4. **对项目长期方向有重大影响**

---

## 📋 已确认决策清单

### D-001: Schema采用三层嵌套结构（School / Program / Notice）

**决策时间**: 2026-01-16  
**决策阶段**: PR-2  
**决策内容**:

数据结构从扁平的单层院校列表升级为三层嵌套：
- School（院校）
- Program（项目/学院）
- Notice（通知）

**理由**:
1. 符合推免业务的真实场景（一校多院、一院多年）
2. 支持未来扩展（历史通知、多项目）
3. 数据组织更清晰

**影响范围**:
- universities.json数据文件
- dataLoader.ts加载逻辑
- 所有前端组件

**回滚成本**: 高（需要重写数据加载和展平逻辑）

**状态**: ✅ 已实施，不可回滚

---

### D-002: 链接质量采用A/B/C/D四级分类

**决策时间**: 2026-01-16  
**决策阶段**: PR-1  
**决策内容**:

链接质量分为四个等级：
- A级：官方推免通知页
- B级：官方通知列表页/推免栏目页
- C级：学院/研究生院首页
- D级：第三方平台/聚合站

**理由**:
1. 明确区分链接的可信度
2. 为用户提供透明的信息质量指标
3. 指导数据维护优先级

**影响范围**:
- universities.json中的linkGrade字段
- check-data-quality.js检查逻辑
- NOTICE_GRADE_RULES.md规则文档

**回滚成本**: 中（需要重新定义分级标准）

**状态**: ✅ 已实施，不可回滚

---

### D-003: Year保护机制（yearStatus字段）

**决策时间**: 2026-01-16  
**决策阶段**: PR-3  
**决策内容**:

引入yearStatus字段，取值为：
- verified: 已确认与notice.year一致
- unverified: 暂未确认
- mismatch: 与notice.year明显不一致

**核心规则**:
> Year未核验的通知，不得评为A级

**理由**:
1. 防止使用往年通知误导学生
2. 明确标注数据的时效性
3. 建立数据可信度的硬性约束

**影响范围**:
- universities.json中的yearStatus字段
- check-data-quality.js中的verifyYear()函数
- NOTICE_GRADE_RULES.md规则文档

**回滚成本**: 低（但会失去重要的质量保障）

**状态**: ✅ 已实施，不可回滚

---

### D-004: 停损线原则（达标即停）

**决策时间**: 2026-01-16  
**决策阶段**: PR-3规划  
**决策内容**:

设定明确的质量目标，达标后立即停止：
- D级链接 = 0
- 整体健康度 ≥ 90%
- 第一梯队A级占比 = 100%（或合理范围内）

**理由**:
1. 防止无休止的"完美主义"消耗
2. 控制开发成本和时间
3. 聚焦核心价值（头部院校质量）

**影响范围**:
- PR-3执行范围
- 后续数据维护策略

**回滚成本**: 无（这是执行原则，非技术决策）

**状态**: ✅ 已确认，严格执行

---

### D-005: 不引入自动爬虫（至少在v1.1.0阶段）

**决策时间**: 2026-01-16  
**决策阶段**: 长期规划  
**决策内容**:

在Schema和校验规则稳定前，不引入自动爬虫。

**理由**:
1. 爬虫会快速复制不稳定的数据结构
2. 积分消耗极大
3. 错误率不可控
4. 需要先建立人工接管机制

**前置条件**（未来考虑爬虫时必须满足）:
- 至少2个完整版本周期的稳定Schema
- 完善的校验规则
- 人工接管触发机制
- 充足的资源预算

**影响范围**:
- 数据更新方式（人工为主）
- 技术栈选择

**回滚成本**: 无（未实施）

**状态**: ✅ 已确认，短期内不做

---

### D-006: B级在非头部学校是可接受状态

**决策时间**: 2026-01-16  
**决策阶段**: PR-3规划  
**决策内容**:

对于第三、四、五梯队院校，B级（官方列表页）视为长期可接受状态，不强制升级为A级。

**理由**:
1. 非头部学校通知发布不规律
2. 列表页在推免季前期往往比过期正文更可靠
3. 避免为了"装饰性KPI"浪费资源

**影响范围**:
- PR-3执行范围（只修复第一梯队）
- 长期数据维护策略

**回滚成本**: 无（这是质量标准，非技术决策）

**状态**: ✅ 已确认，严格执行

---

### D-007: 项目目标是"长期可信、低维护成本"

**决策时间**: 2026-01-16  
**决策阶段**: 项目定位  
**决策内容**:

项目的核心目标不是"功能齐全"，而是：
- 长期可信
- 低维护成本
- 对学生真正有判断价值

**理由**:
1. 单人团队+AI协作的现实约束
2. 推免信息的时效性和准确性至关重要
3. 避免功能蔓延导致维护失控

**影响范围**:
- 所有功能决策
- 资源分配优先级
- 技术选型

**回滚成本**: 无（这是项目愿景）

**状态**: ✅ 已确认，长期坚持

---

### D-008: 协作方式：先写计划→审核→再执行

**决策时间**: 2026-01-16  
**决策阶段**: 协作流程  
**决策内容**:

任何超过3个文件或300行代码的改动，必须：
1. 先写详细计划
2. 提交用户审核
3. 确认后再执行

**理由**:
1. 控制积分消耗
2. 避免方向性错误
3. 保持项目可控性

**影响范围**:
- 开发流程
- 文档要求

**回滚成本**: 无（这是协作原则）

**状态**: ✅ 已确认，严格执行

---

## 🔄 决策修订流程

如果需要修订或回滚某个决策：

1. **提出修订理由**（必须包含）:
   - 为什么现有决策不再适用？
   - 新方案的优势是什么？
   - 回滚/修订的成本评估

2. **影响分析**:
   - 哪些代码需要修改？
   - 哪些数据需要迁移？
   - 是否影响用户体验？

3. **团队讨论**:
   - 用户确认
   - GPT审核（如适用）
   - 记录讨论结果

4. **更新本文档**:
   - 标记原决策为"已废弃"
   - 添加新决策
   - 记录修订原因和时间

---

## 📝 决策模板

```markdown
### D-XXX: 决策标题

**决策时间**: YYYY-MM-DD  
**决策阶段**: 阶段名称  
**决策内容**:

简要描述决策内容

**理由**:
1. 理由1
2. 理由2

**影响范围**:
- 影响的代码/数据/文档

**回滚成本**: 高/中/低（说明）

**状态**: ✅ 已实施 / ⏳ 待实施 / ❌ 已废弃
```

---

**维护者**: Manus AI + 用户团队  
**审核者**: GPT-4（如适用）  
**最后审核**: 2026-01-16
